{% set badge_class = {
  "query": "badge-query",
  "delegation": "badge-delegation",
  "result": "badge-result",
  "decision": "badge-decision",
  "response": "badge-response",
}.get(interaction.interaction_type, "badge-unknown") %}
<div class="interaction-row">
  <span class="interaction-arrow">
    <span class="source">{{ interaction.source_display or interaction.source }}</span> &rarr; <span class="target">{{ interaction.target_display or interaction.target }}</span>
  </span>
  <span class="interaction-summary" title="{{ interaction.summary }}">{{ interaction.summary }}</span>
  <span class="interaction-meta">
    <span class="badge {{ badge_class }}">{{ interaction.interaction_type }}</span>
    <span class="interaction-time">{{ interaction.timestamp_display }}</span>
  </span>
</div>
